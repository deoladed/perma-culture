<div class="card" id='post-<%= post.id %>'>
  <!-- --------- CARD HEADER----------- --><!-- A ARRANEGR +++++ -->
  <h3 class="card-title text-center" id="Card_Post">
    <%= post.title %>
    <% if post.writter == current_user %>      
    <span class='pull-right mr-1 mt-1'> 
      <%= link_to '#', data: { toggle:"modal", target:"#editModal-#{post.id}" } do %><i class="now-ui-icons ui-2_settings-90"></i> Editer<% end %> 
      <%= link_to post_path(post.id), remote: true, method: :delete, data: { confirm: 'Etes-vous sur?'} do %><i class="now-ui-icons ui-1_simple-remove"></i><% end %>
    </span>
    <% end %>
  </h3>
  <!-- ---------- CONTENT ------------------- -->
  <p class="justify-content-center pl-3 pr-3">
    <%= post.content %>
  </p>
  <!-- --------------------- POST_PICTURES /CARROUSEL (PARTIAL ?)--------------------------- -->
  <!-- --------__> ADD DELETE PICTURE -->
  <% if post.post_pictures.length > 1 %>
  <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img class="d-block w-100" src="..." alt="First slide">
      </div>
      <div class="carousel-item">
        <img class="d-block w-100" src="..." alt="Second slide">
      </div>
      <div class="carousel-item">
        <img class="d-block w-100" src="..." alt="Third slide">
      </div>
    </div>
    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
  <!-- --------------------------- CARROUSEL END / ONE_PICTURE --------------------- -->
  <% elsif post.post_pictures.length == 1 %>
  <div class="card-image">
    <%= image_tag post.post_pictures[0], class:"img img-raised rounded" %>
  </div>
<!--   <%# elsif post.post_pictures.length == 0 %>
    <div class="card-image">
      link_to ajouter une image + modal ?
    </div> -->
    <%end%>
    <!-- ----------------------------------------- END PICTURES / POST FOOTER - BUTTONS --------------- -->
    <div class="d-flex justify-content-between mb-0">
      <strong class="card text-center w-25 ml-3 mb-3 mt-3" ><%=post.category.name%></strong>
      <div>
        <%= button_tag class:"btn btn-danger btn-neutral pull-right" do %><i class="now-ui-icons ui-2_favourite-28"></i> <%= post.likes.size %><% end %> <!-- TO DO  controller + create puis if already_liked destroy else create puis remote:true + javascript qui incremente?decremente le compteur-->
        <%= button_tag class:"btn btn-danger btn-neutral pull-right", id:"comments-toggle-#{post.id}" do %><span class='number-comments-<%= post.id %>'><%= post.comments.size %></span> <%= 'commentaire'.pluralize(post.comments.size) %><% end %> <!-- TRIGGER COMMENTS -->
      </div>
    </div>
    <!-- ------------------------------------------------ EDIT MODAL ------------------------------------- -->
    <div class="modal fade" id="editModal-<%= post.id %>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Editer mon post</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            ...
            Form edit post
            <%= render 'form', post: post %> <!-- TO DO -->
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
            <button type="button" class="btn btn-primary">Enregistrer</button>
          </div>
        </div>
      </div>
    </div>
    <!-- ----------------------------------------------- COMMENTS ------------------------------------- -->
    <hr class='m-0'>
    <div class="container" id='comments-area-<%= post.id %>' style='display:none'>
      <div class="row">
        <div class="col-md-8 ml-auto mr-auto">

          <h3 class="title text-center">Commenter</h3>
          <div class="media media-post">
            <%= link_to user_path(current_user.id), class:'pull-left author' do %>
            <div class="avatar">
              <%= image_tag current_user.avatar, class:'media-object img-raised', alt:"Votre photo de profil" %>
            </div>
            <% end %>
            <div class="media-body">
              <%= form_for @comment, url: post_comments_path(post.id), remote: true do |f| %>
              <%= f.text_area :content, autofocus: true, placeholder:'Commentez', rows:'4', class:'form-control' %>
              <div class="media-footer">
                <%= f.submit :submit, class:"btn btn-primary pull-right" do %>
                <i class="now-ui-icons ui-1_send"></i> Repondre
                <% end %>
              </div>
              <% end %>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12">

              <h3 class="title text-center"><span class='number-comments-<%= post.id %>'><%= post.comments.size %></span> <%= 'commentaire'.pluralize(post.comments.size) %></h3>
              <div class="media-area" id='comments-receiver-<%= post.id %>'>
                <%= render post.comments.reverse  %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- ------------------------------------------------ COMMENTS END --------------------------- -->
  </div>

  <div style='display:none'>
    <script>
      $(document).ready( function() {
        $('#comments-toggle-<%= post.id %>').click(function(e) {
          $('#comments-area-<%= post.id %>').toggle();  
        })
      })
    </script>
  </div>